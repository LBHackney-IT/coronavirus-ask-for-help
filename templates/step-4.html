{% from 'lbh-header/macro.njk' import lbhHeader %}
{% from 'lbh-button/macro.njk' import lbhButton %}
{% from "lbh-textarea/macro.njk" import lbhTextarea %}
{% from "lbh-checkboxes/macro.njk" import lbhCheckboxes %}

{% extends "./layouts/base.html" %}

{% block content %}
    
    <form action="/step-3" method="post">
        {% include './partials/step-1-fields.html' %}
        {% include './partials/step-1-1-fields.html' %}
        {% include './partials/step-1-2-fields.html' %}
        {% include './partials/step-1-3-fields.html' %}
        {% include './partials/step-1-4-fields.html' %}
        {% include './partials/step-2-fields.html' %}
        {% include './partials/step-3-fields.html' %}
        {% include './partials/step-3-1-fields.html' %}
        {% include './partials/step-3-2-fields.html' %}
        {% include './partials/step-3-3-fields.html' %}
        {% include './partials/step-3-4-fields.html' %}


        {{ lbhCheckboxes({
            "fieldset": {
                "legend": {
                    "text": "Who is supporting you currently?"
                }
            },
            "hint": {
                "text": "Select all that apply"
            },
            "idPrefix": "current_support",
            "name": "current_support",
            "items": [
                {
                    "value": "family",
                    "text": "Family",
                    "checked": true if query.current_support and "family" in query.current_support else false
                },
                {
                    "value": "friends",
                    "text": "Friends",
                    "checked": true if query.current_support and "friends" in query.current_support else false
                },
                {
                    "value": "neighbours",
                    "text": "Neighbours",
                    "checked": true if query.current_support and "neighbours" in query.current_support else false
                },
                {
                    "value": "volunteers",
                    "text": "Volunteers",
                    "checked": true if query.current_support and "volunteers" in query.current_support else false
                },
                {
                    "value": "charities",
                    "text": "Charities",
                    "checked": true if query.current_support and "charities" in query.current_support else false
                },
                {
                    "value": "hackney council",
                    "text": "Hackney Council - such as a social worker, carer or housing officer",
                    "checked": true if query.current_support and "hackney council" in query.current_support else false
                },
                {
                    "value": "someone else",
                    "text": "Someone else - such as health professionals, including GPs",
                    "checked": true if query.current_support and "someone else" in query.current_support else false
                },
                {
                    "value": "nobody",
                    "text": "Nobody, I am not receiving any support",
                    "checked": true if query.current_support and "nobody" in query.current_support else false
                },
               {
                    "value": "not sure",
                    "text": "Not sure",
                    "checked": true if query.current_support and "not sure" in query.current_support else false
                }
            ],
            "formGroup": {
                "classes": "govuk-form-group--error lbh-form-group" if query.error_current_support else ''
            },
            "errorMessage": {
                "text": query.error_current_support
            } if query.error_current_support else null
        }) }}

        {{ lbhTextarea({
            "label": {
                "text": "Is there anything you’d like to tell us about the support you’re receiving? (Optional)"
            },
            "hint": {
                "text": "For example, who is supporting you, how they’re helping or anything else you think we should know."
            },
            "id": "current_support_feedback",
            "name": "current_support_feedback",
            "value": query.current_support_feedback
        }) }}

        {{ lbhButton({
            text: "Next"
        })}}
    </form>
{% endblock %}